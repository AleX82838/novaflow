<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NOVAFLOW â€” Mercado & Bazar (v3)</title>
  <meta name="theme-color" content="#07030b" />
  <link rel="manifest" href="manifest.json" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Poppins:wght@300;400;600&family=Playfair+Display:wght@500;700&family=Orbitron:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body data-theme="dark">

  <!-- ================= Intro (Video + Logo + Audio) ================= -->
  <div id="intro-overlay" aria-hidden="false">
    <video id="intro-video" autoplay muted playsinline>
      <source src="intronivi.mp4" type="video/mp4" />
      Tu navegador no soporta video HTML5.
    </video>

    <!-- animated logo that appears at end of video -->
    <div id="intro-logo" aria-hidden="true">
      <img src="novaflow.png" alt="NOVAFLOW" />
      <div class="intro-logo-text">NOVAFLOW</div>
    </div>

    <div id="intro-overlay-text">Iniciando Sistema NOVAFLOW...</div>

    <!-- audio (optional) - will be played programmatically; file must exist -->
    <audio id="intro-audio" preload="auto" src="prueba1.mp3"></audio>
  </div>

  <!-- ================= Contenido principal ================= -->
  <div id="app" aria-hidden="true">
    <!-- ================= Mensaje Bienvenida (modal local) ================= -->
    <div id="welcomeContainer" class="welcome-modal hidden" aria-hidden="true">
      <div class="welcome-inner card">
        <h3>Â¡Bienvenido a NOVAFLOW!</h3>
        <p>Ingresa tu nombre para comenzar:</p>
        <div style="display:flex;gap:8px;align-items:center">
          <input type="text" id="usernameInput" placeholder="Tu nombre" aria-label="Nombre de usuario" />
          <button id="saveNameBtn" class="btn-primary">Guardar</button>
        </div>
        <div style="margin-top:10px" class="muted small">Tu nombre se guarda localmente en este dispositivo.</div>
      </div>
    </div>

    <!-- ================= Sidebar / MenÃº ================= -->
    <aside class="sidebar" id="sidebar" aria-label="NavegaciÃ³n">
      <div class="sidebar-top">
        <div class="logo-block">
          <img src="novaflow.png" alt="NOVAFLOW" onerror="this.style.display='none'">
          <div class="subtitle">Mercado Â· Bazar Â· Eventos</div>
        </div>
      </div>

      <nav class="menu" role="navigation" aria-label="MenÃº principal">
        <button class="menu-item" data-target="home">Inicio</button>
        <button class="menu-item" data-target="catalog">Tienda</button>
        <button class="menu-item" data-target="featured">Destacados</button>
        <button class="menu-item" data-target="events">Eventos</button>
        <button class="menu-item" data-target="contact">Contacto</button>
      </nav>

      <div class="sidebar-bottom">
        <div class="sidebar-controls">
          <button id="theme-toggle" class="icon-btn" title="Cambiar tema">ðŸŒ“</button>
          <button id="fav-toggle" class="icon-btn" title="Favoritos">â˜… <span id="fav-count">0</span></button>
          <button id="cart-toggle" class="cart-btn" aria-label="Abrir carrito">ðŸ§º <span id="cart-count">0</span></button>
        </div>
        <div class="sidebar-footer muted small">Â© <span id="year"></span> NOVAFLOW</div>
      </div>
    </aside>

    <!-- ================= Main Wrap ================= -->
    <div class="main-wrap">
      <header class="topbar">
        <button id="menu-collapse" class="hamburger" aria-label="Contraer menÃº" aria-expanded="false">â˜°</button>
        <div class="search-inline">
          <input id="search" type="search" placeholder="Buscar productosâ€¦" aria-label="Buscar productos" />
          <button id="search-clear" class="icon-btn" title="Limpiar bÃºsqueda">âœ•</button>
        </div>
        <div class="topbar-right">
          <div id="live-clock" class="clock" aria-live="polite">--:--:--</div>
          <button id="install-btn" class="icon-btn" title="Instalar NOVAFLOW" style="display:none">ðŸ“²</button>
        </div>
      </header>

      <main class="content" id="content" role="main">
        <!-- HOME -->
        <section id="home" class="panel active">
          <div class="panel-grid">
            <div class="panel-left">
              <h2>Bienvenido a <span class="brand-strong">NOVAFLOW</span></h2>
              <p class="lead">Comida, bebidas, ropa y coleccionables â€” ahora mÃ¡s elegante, moderno e inteligente.</p>

              <div class="cta-row">
                <button class="btn-primary" data-target="catalog">Explorar tienda</button>
                <button class="btn-outline" data-target="events">Ver eventos</button>
              </div>

              <div class="card event-panel neon-panel">
                <strong>PrÃ³ximo Bazar</strong>
                <div class="muted small">26 de diciembre de 2025 Â· 4:00 PM Â· Ciudad de MÃ©xico</div>
                <div id="countdown-large" class="countdown" aria-live="polite"></div>
              </div>
            </div>

            <aside class="panel-right">
              <div class="card">
                <h4>Resumen</h4>
                <div id="estimate-value">Sin artÃ­culos</div>
                <div class="muted small">Estimado del tiempo de preparaciÃ³n</div>
              </div>

              <div class="card">
                <h4>Soporte</h4>
                <div class="muted small">Chat en vivo y contacto por WhatsApp</div>
                <div class="mt">
                  <button id="open-chat" class="btn-primary">Abrir chat</button>
                  <button id="share-location-btn" class="btn-outline">Compartir ubicaciÃ³n</button>
                </div>
              </div>
            </aside>
          </div>
        </section>

        <!-- CATALOG -->
        <section id="catalog" class="panel">
          <div class="panel-header">
            <h2>Tienda</h2>
            <div class="controls">
              <label for="sort">Ordenar</label>
              <select id="sort">
                <option value="popular">Recomendados</option>
                <option value="price-asc">Precio: menor â†’ mayor</option>
                <option value="price-desc">Precio: mayor â†’ menor</option>
                <option value="rating">Mejor valorados</option>
              </select>
            </div>
          </div>

          <div class="chips" id="category-chips" role="toolbar" aria-label="CategorÃ­as"></div>

          <div id="category-featured" class="card neon-panel" style="margin-bottom:12px;display:none">
            <div id="category-featured-title" style="font-weight:800;margin-bottom:8px"></div>
            <div class="carousel" id="category-featured-carousel"></div>
          </div>

          <div id="products" class="products-grid" aria-live="polite"></div>
        </section>

        <!-- FEATURED -->
        <section id="featured" class="panel">
          <h2>Destacados</h2>
          <div class="carousel card neon-panel" id="featured-carousel" aria-roledescription="carousel">
            <div class="carousel-track-wrapper">
              <div class="carousel-track" id="carousel-track"></div>
            </div>
            <div class="carousel-dots" id="carousel-dots"></div>
          </div>
        </section>

        <!-- EVENTS -->
        <section id="events" class="panel">
          <h2>Eventos & Bazar</h2>
          <div class="card">
            <p class="muted">Ven a conocer vendedores locales, probar comidas y encontrar artÃ­culos exclusivos.</p>
            <div class="event-large">
              <div>
                <h3>Gran Bazar NOVAFLOW</h3>
                <p>26 de diciembre de 2025 â€” 4:00 PM Â· CD.JUCHITAN DE ZARAGOZA OAX. PARQUE CENTRAL</p>
                <button id="whatsapp-send-event" class="btn-primary">Contactar por WhatsApp</button>
              </div>
              <div id="countdown-small" class="countdown"></div>
            </div>
          </div>
        </section>

        <!-- CONTACT -->
        <section id="contact" class="panel">
          <h2>Contacto</h2>
          <div class="card">
            <p>Para colaboraciones: <a href="mailto:contacto@novaflow.example">contacto@novaflow.example</a></p>
          </div>
        </section>
      </main>
    </div>

    <!-- PRODUCT MODAL -->
    <div id="product-modal" class="modal" aria-hidden="true">
      <div class="modal-inner card">
        <button id="modal-close" class="modal-close" aria-label="Cerrar">âœ•</button>
        <div id="modal-content"></div>
      </div>
    </div>

    <!-- CART SIDEBAR -->
    <aside id="cart" class="cart-sidebar" aria-hidden="true">
      <div class="cart-header">
        <strong>Carrito</strong>
        <button id="close-cart" class="icon-btn" aria-label="Cerrar carrito">âœ•</button>
      </div>
      <div id="cart-items" class="cart-items"></div>
      <div class="cart-footer">
        <div class="cart-totals">
          <div>Subtotal <span id="subtotal">$0.00</span></div>
          <div>EnvÃ­o <span id="shipping">$0.00</span></div>
          <div class="total-line">Total <strong id="grandtotal">$0.00</strong></div>
        </div>
        <div class="cart-actions">
          <button id="clear-cart" class="btn-ghost">Vaciar</button>
          <button id="checkout" class="btn-primary">Confirmar pedido (WhatsApp)</button>
          <button id="export-orders" class="btn-outline">Exportar pedidos (CSV)</button>
          <button id="whatsapp-cart" class="btn-outline">Compartir por WhatsApp</button>
        </div>
      </div>
    </aside>

    <!-- CHAT WIDGET -->
    <div id="chat-widget" class="chat-widget" aria-hidden="true">
      <div class="chat-header">
        <div>Soporte NOVAFLOW</div>
        <button id="close-chat" class="icon-btn" aria-label="Cerrar">âœ•</button>
      </div>
      <div id="chat-messages" class="chat-messages" role="log" aria-live="polite"></div>
      <div class="chat-input">
        <input id="chat-text" placeholder="Escribe tu mensaje..." />
        <button id="send-chat" class="btn-primary">Enviar</button>
      </div>
    </div>
    <button id="chat-floating" class="chat-floating" title="Abrir chat">ðŸ’¬</button>

    <!-- TOAST -->
    <div id="toast-wrap" class="toast-wrap" aria-live="polite"></div>
  </div>

  <!-- ================= Scripts ================= -->
  <script src="script.js" defer></script>
</body>
</html>

